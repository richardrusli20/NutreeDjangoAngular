{% extends 'base/navbar.html' %}
{% block title %} Checkout {% endblock %}
{% load static %}
{% block body%}

<div class="container">
    <!--Manual Breadcrumbs-->
    <ul class='breadcrumb'>
        <li><a href="{% url 'welcome:index' %}"><i class="fa fa-home"></i></a></li>
		<li><a href="{% url 'customer:mybag' customer_pk%}">My Bag</a></li>
        <li>Checkout</li>
    </ul>
    <!--End of Manual Breadcrumbs-->
	<div class="row">
		<div class="col-md-6">
			{% for item in customer_bag %}
				<div class="card-checkout">
					<img src="{{v.foodlist.foodlist_logo}}" class="img-checkout" />
					<div class="foodlist-info">
						<h3> {{item.foodlist.foodlist_name}} </h3>
						<p> Available Date: {{item.foodlist.available_date}} </p>
						<p> Qty: {{item.quantity}} </p>
					</div>
					<h3>Foods : </h3>
					<ul>
						{% for food in item.foodlist.foods.all %}
							<li> {{ food.food_name }} </li>
						{% endfor %}
					</ul>

				</div>
			{% endfor %}
		</div>


		<div class="col-md-6">
			<div class="card-checkout">
				<h2>Delivery Address</h2>
				{% for address in customer_address %}
					<dt class="col-sm-10">Address:<span class="float-right text-muted"> {{ address.street }} </span></dt>
					<dt class="col-sm-10">Address:<span class="float-right text-muted"> {{ address.postal_code }} </span></dt>
					<dt class="col-sm-10">Address:<span class="float-right text-muted"> {{ address.city }} </span></dt>
					<dt class="col-sm-10">Address:<span class="float-right text-muted"> {{ address.province }} </span></dt>
				{% endfor %}
				<hr>
				<dt class="col-sm-10">Delivery Method <span class="float-right text-muted">Gojek</span></dt>
				<dt class="col-sm-10">Sub total: <span class="float-right">{{ sub_total }}</span></dt>
				<dt class="col-sm-10">Delivery costs: <span class="float-right text-muted">{{ delivery_cost }}</span></dt>
				<dt class="col-sm-10">Total: <span class="float-right">{{ grand_total }}</span></dt>			
			

			</div>
			
			<div class="card-checkout">
			<h2>Choose Your Payment Method</h2>
				<div class="card-list">
					<form class="form-group" method="post">
						<input type="radio" name="payment-gateway" value="GO-PAY" />
						<img src="{% static 'welcome/img/gopay-logo.jpg' %}" style="width:100px; height:auto;" />
						GO-PAY
						<br>
						<input type="radio" name="payment-gateway" value="OVO" />
						<img src="{% static 'welcome/img/ovo-logo.png' %}" style="width:70px; height:auto;" />
						OVO
						<br>
						<input type="radio" name="payment-gateway" value="Credit Card Visa/Mastercard" />
						<img src="{% static 'welcome/img/cc-logo.png' %}" style="width:150px; height:auto;" />
						Credit Card
						<br>
						<input type="radio" name="payment-gateway" value="Bank Transfer" />
						<img src="{% static 'welcome/img/BCA-LOGO.png' %}" style="width:100px; height:auto;" />
						BCA Bank Transfer
					</form>
				</div>
			</div>
    <button id="pay-button">Pay!</button>
    <pre><div id="result-json">JSON result will appear here after payment:<br></div></pre> 

<!-- TODO: Remove ".sandbox" from script src URL for production environment. Also input your client key in "data-client-key" -->
    <script src="https://app.sandbox.midtrans.com/snap/snap.js" data-client-key="<Set your ClientKey here>"></script>
    <script type="text/javascript">
      document.getElementById('pay-button').onclick = function(){
        // SnapToken acquired from previous step
        snap.pay('{{ transaction_token }}', {
          // Optional
          onSuccess: function(result){
            /* You may add your own js here, this is just example */ document.getElementById('result-json').innerHTML += JSON.stringify(result, null, 2);
          },
          // Optional
          onPending: function(result){
            /* You may add your own js here, this is just example */ document.getElementById('result-json').innerHTML += JSON.stringify(result, null, 2);
          },
          // Optional
          onError: function(result){
            /* You may add your own js here, this is just example */ document.getElementById('result-json').innerHTML += JSON.stringify(result, null, 2);
          }
        });
      };
    </script>

			<!--Payment manually-->
			{% comment %} <a href="{% url 'customer:pay' customer_pk %}" class="btn btn-success btn-block"> Pay Now </a> {% endcomment %}
			{% comment %} <input type="submit" value="Go To Payment"> {% endcomment %}


		</div>
		{% comment %} <div class="btn-footer">
			<a href="{% url 'customer:pay' customer_pk %}" class="btn btn-success btn-block"> Pay Now </a>
		</div> {% endcomment %}

		


	</div>
</div>

{% endblock %}